# T-GUI Framework æ€»ç»“

## ğŸ‰ æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ªç±»ä¼¼napariçš„GUIæ¡†æ¶ï¼

### æ¡†æ¶ç‰¹æ€§

âœ… **å®Œæ•´çš„æ’ä»¶ç³»ç»Ÿ** - åŸºäºpluggyçš„å¯æ‰©å±•æ’ä»¶æ¶æ„
âœ… **äº‹ä»¶é©±åŠ¨æ¶æ„** - å¼ºå¤§çš„äº‹ä»¶ç³»ç»Ÿç”¨äºç»„ä»¶é—´é€šä¿¡
âœ… **å±‚ç®¡ç†ç³»ç»Ÿ** - æ”¯æŒå›¾åƒå±‚ã€ç‚¹å±‚ç­‰å¤šç§æ•°æ®ç±»å‹
âœ… **Qtç”¨æˆ·ç•Œé¢** - ç°ä»£åŒ–çš„GUIç•Œé¢ï¼Œæ”¯æŒå¤šç§Qtåç«¯
âœ… **è®¾ç½®ç®¡ç†** - æŒä¹…åŒ–é…ç½®ç³»ç»Ÿ
âœ… **åŠ¨ä½œç³»ç»Ÿ** - å¯é‡ç”¨çš„å‘½ä»¤ç³»ç»Ÿï¼Œæ”¯æŒèœå•å’Œå¿«æ·é”®

### æ ¸å¿ƒç»„ä»¶

#### 1. åº”ç”¨ç¨‹åºæ¨¡å‹ (`app_model/`)
- **AppContext**: åº”ç”¨ç¨‹åºå…¨å±€çŠ¶æ€ç®¡ç†
- **ActionManager**: åŠ¨ä½œå’Œå‘½ä»¤ç®¡ç†
- æ”¯æŒå¤šæŸ¥çœ‹å™¨ç®¡ç†

#### 2. äº‹ä»¶ç³»ç»Ÿ (`events/`)
- **EventEmitter**: äº‹ä»¶å‘å°„å™¨åŸºç±»
- **EventManager**: äº‹ä»¶ç®¡ç†å’Œåˆ†å‘
- æ”¯æŒå¼±å¼•ç”¨é¿å…å†…å­˜æ³„æ¼

#### 3. æ’ä»¶ç³»ç»Ÿ (`plugins/`)
- **PluginManager**: æ’ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†
- **PluginRegistry**: æ’ä»¶å‘ç°å’Œæ³¨å†Œ
- **Hookè§„èŒƒ**: å®šä¹‰æ’ä»¶æ‰©å±•ç‚¹
  - Widgetè´¡çŒ®
  - Actionè´¡çŒ®
  - Menuè´¡çŒ®
  - æ–‡ä»¶è¯»å†™å™¨è´¡çŒ®

#### 4. æ ¸å¿ƒç»„ä»¶ (`components/`)
- **Viewer**: ä¸»æŸ¥çœ‹å™¨ç»„ä»¶
- **LayerList**: å±‚åˆ—è¡¨ç®¡ç†
- **Layerç±»å‹**: 
  - ImageLayer (å›¾åƒå±‚)
  - PointsLayer (ç‚¹å±‚)
  - å¯æ‰©å±•çš„è‡ªå®šä¹‰å±‚ç±»å‹

#### 5. Qtç”¨æˆ·ç•Œé¢ (`_qt/`)
- **MainWindow**: ä¸»åº”ç”¨ç¨‹åºçª—å£
- **ViewerWidget**: æŸ¥çœ‹å™¨æ˜¾ç¤ºç»„ä»¶
- **LayerListWidget**: å±‚åˆ—è¡¨UIç»„ä»¶
- æ”¯æŒPyQt5/6å’ŒPySide2/6

#### 6. è®¾ç½®ç³»ç»Ÿ (`settings/`)
- **Settings**: é…ç½®ç®¡ç†ç±»
- JSONæ ¼å¼æŒä¹…åŒ–å­˜å‚¨
- æ”¯æŒåµŒå¥—é…ç½®å’Œäº‹ä»¶é€šçŸ¥

### ä½¿ç”¨ç¤ºä¾‹

#### åŸºæœ¬ä½¿ç”¨
```python
import numpy as np
import t_gui

# åˆ›å»ºæŸ¥çœ‹å™¨
viewer = t_gui.make_viewer()

# æ·»åŠ å›¾åƒæ•°æ®
image_data = np.random.random((100, 100))
viewer.add_image(image_data, name="Random Image", colormap='viridis')

# æ·»åŠ ç‚¹æ•°æ®
points_data = np.random.random((50, 2)) * 100
viewer.add_points(points_data, name="Random Points", size=5)

# å¯åŠ¨åº”ç”¨ç¨‹åº
t_gui.run()
```

#### æ’ä»¶å¼€å‘
```python
from t_gui.plugins.hookspecs import hookspec

class MyPlugin:
    @hookspec
    def t_gui_get_widget_contributions(self):
        return [{
            'widget': MyCustomWidget,
            'name': 'My Widget',
            'area': 'right'
        }]
    
    @hookspec
    def t_gui_get_action_contributions(self):
        return [{
            'id': 'my.action',
            'title': 'My Action',
            'callback': self.my_callback
        }]

def setup_plugin():
    return MyPlugin()
```

### æµ‹è¯•ç»“æœ

âœ… **æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡**
- æ¨¡å—å¯¼å…¥æµ‹è¯•
- æŸ¥çœ‹å™¨åŠŸèƒ½æµ‹è¯•
- äº‹ä»¶ç³»ç»Ÿæµ‹è¯•
- è®¾ç½®ç³»ç»Ÿæµ‹è¯•
- æ’ä»¶ç³»ç»Ÿæµ‹è¯•
- Qté›†æˆæµ‹è¯•

âœ… **åº”ç”¨ç¨‹åºæˆåŠŸå¯åŠ¨**
- GUIç•Œé¢æ­£å¸¸æ˜¾ç¤º
- å±‚ç®¡ç†åŠŸèƒ½æ­£å¸¸
- èœå•å’Œå·¥å…·æ æ­£å¸¸

### æ–‡ä»¶ç»“æ„
```
t_gui/
â”œâ”€â”€ __init__.py                 # ä¸»å…¥å£ç‚¹
â”œâ”€â”€ app_model/                  # åº”ç”¨ç¨‹åºæ¨¡å‹
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ actions/
â”‚   â””â”€â”€ context.py
â”œâ”€â”€ _qt/                        # Qtç”¨æˆ·ç•Œé¢
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main_window.py
â”‚   â””â”€â”€ widgets/
â”œâ”€â”€ plugins/                    # æ’ä»¶ç³»ç»Ÿ
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ manager.py
â”‚   â”œâ”€â”€ hookspecs.py
â”‚   â””â”€â”€ registry.py
â”œâ”€â”€ components/                 # æ ¸å¿ƒç»„ä»¶
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ viewer.py
â”‚   â””â”€â”€ layer_list.py
â”œâ”€â”€ events/                     # äº‹ä»¶ç³»ç»Ÿ
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ event_system.py
â”œâ”€â”€ settings/                   # è®¾ç½®ç³»ç»Ÿ
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ config.py
â””â”€â”€ utils/                      # å·¥å…·ç±»
    â”œâ”€â”€ __init__.py
    â””â”€â”€ misc.py
```

### æ‰©å±•æ€§

è¿™ä¸ªæ¡†æ¶è®¾è®¡ä¸ºé«˜åº¦å¯æ‰©å±•ï¼š

1. **æ’ä»¶ç³»ç»Ÿ**: å…è®¸ç¬¬ä¸‰æ–¹å¼€å‘è€…è½»æ¾æ·»åŠ æ–°åŠŸèƒ½
2. **å±‚ç±»å‹**: å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰å±‚ç±»å‹æ¥æ”¯æŒä¸åŒçš„æ•°æ®æ ¼å¼
3. **äº‹ä»¶ç³»ç»Ÿ**: ç»„ä»¶é—´æ¾è€¦åˆé€šä¿¡
4. **Qtåç«¯**: æ”¯æŒå¤šç§Qtå®ç°
5. **é…ç½®ç³»ç»Ÿ**: çµæ´»çš„è®¾ç½®ç®¡ç†

### ä¸‹ä¸€æ­¥å‘å±•æ–¹å‘

1. **æ¸²æŸ“å¼•æ“**: é›†æˆOpenGLæˆ–å…¶ä»–é«˜æ€§èƒ½æ¸²æŸ“å¼•æ“
2. **æ›´å¤šå±‚ç±»å‹**: æ·»åŠ çŸ¢é‡ã€ç½‘æ ¼ã€ä½“ç§¯ç­‰å±‚ç±»å‹
3. **æ’ä»¶ç”Ÿæ€**: å»ºç«‹æ’ä»¶å¸‚åœºå’Œæ–‡æ¡£
4. **æ€§èƒ½ä¼˜åŒ–**: å¤§æ•°æ®é›†çš„å¼‚æ­¥å¤„ç†
5. **Webæ”¯æŒ**: æ·»åŠ Webå‰ç«¯æ”¯æŒ

## ğŸš€ æ¡†æ¶å·²ç»æˆåŠŸåˆ›å»ºå¹¶å¯ä»¥ä½¿ç”¨ï¼
